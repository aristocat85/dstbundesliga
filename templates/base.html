{% load cms_tags sekizai_tags menu_tags static cookielaw_tags league_tags dstffbl_tags %}
<html>
    <head>
        <title>{% page_attribute "page_title" %}</title>

        <link rel="apple-touch-icon" sizes="57x57" href="/media/favicon/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/media/favicon/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/media/favicon/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/media/favicon/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/media/favicon/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/media/favicon/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/media/favicon/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/media/favicon/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/media/favicon/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="/media/favicon/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/media/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/media/favicon/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/media/favicon/favicon-16x16.png">
        <link rel="manifest" href="/media/favicon/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/media/favicon/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        {% render_block "css" %}
        {% block css %}
            <link rel="stylesheet" type="text/css" href="{% static 'css/semanticui_2_3_0_min.css' %}">
            <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}?id={% settings_value 'CSS_VERSION_HASH' %}">
        {% endblock %}
    </head>
    <body>
        <div class="main">
            {% cms_toolbar %}
            <header class="logo-header">
                <div class="logo-container"><img class="logo" src="/media/images/{{ header_logo | default:'dst_bl_logo' }}.png" alt="Home"></div>
                <div class="header-container"><img src="/media/images/dst_header.png" alt="Down! Set! Talk! Fantasy Football Bundesliga"></div>
            </header>
            <nav id="top-nav" class="ui sticky">
                <div class="menu-row first-menu-row">{% show_menu 0 100 100 100 'menu.html' %}</div>
                <div class="menu-row cffc-menu-row hidden_one hidden_two hidden_three">
                    <div class="item conference-menu-node menu-node-league-3CFFC CFFC">
                        <a href="/leagues/conf/CFFC/lev/3/">Conference-Liga</a>
                    </div>
                    <div class="item conference-menu-node menu-node-league-4CFFC CFFC">
                        <a href="/leagues/conf/CFFC/lev/4/">Divisionsliga</a>
                    </div>
                    <div class="item conference-menu-node menu-node-league-5CFFC CFFC droppable">
                        <a href="/leagues/conf/CFFC/lev/5/">Regionalliga</a>
                    </div>
                </div>
                <div class="menu-row affc-menu-row hidden_one hidden_two hidden_three">
                    <div class="item conference-menu-node menu-node-league-3AFFC AFFC">
                        <a href="/leagues/conf/AFFC/lev/3/">Conference-Liga</a>
                    </div>
                    <div class="item conference-menu-node menu-node-league-4AFFC AFFC">
                        <a href="/leagues/conf/AFFC/lev/4/">Divisionsliga</a>
                    </div>
                    <div class="item conference-menu-node menu-node-league-5AFFC AFFC droppable">
                        <a href="/leagues/conf/AFFC/lev/5/">Regionalliga</a>
                    </div>
                </div>
                <div class="menu-row regional-menu-row regional-cffc-menu-row hidden_one hidden_two hidden_three">
                    <div class="item regional-menu-node menu-node-league-5CFFC-Nord CFFC">
                        <a href="/leagues/conf/CFFC/lev/5/reg/Nord/">Nord</a>
                    </div>
                    <div class="item regional-menu-node menu-node-league-5CFFC-Ost CFFC">
                        <a href="/leagues/conf/CFFC/lev/5/reg/Ost/">Ost</a>
                    </div>
                    <div class="item regional-menu-node menu-node-league-5CFFC-Süd CFFC">
                        <a href="/leagues/conf/CFFC/lev/5/reg/Sued/">Süd</a>
                    </div>
                    <div class="item regional-menu-node menu-node-league-5CFFC-West CFFC">
                        <a href="/leagues/conf/CFFC/lev/5/reg/West/">West</a>
                    </div>
                </div>
                <div class="menu-row regional-menu-row regional-affc-menu-row hidden_one hidden_two hidden_three">
                    <div class="item regional-menu-node menu-node-league-5AFFC-Nord AFFC">
                        <a href="/leagues/conf/AFFC/lev/5/reg/Nord/">Nord</a>
                    </div>
                    <div class="item regional-menu-node menu-node-league-5AFFC-Ost AFFC">
                        <a href="/leagues/conf/AFFC/lev/5/reg/Ost/">Ost</a>
                    </div>
                    <div class="item regional-menu-node menu-node-league-5AFFC-Süd AFFC">
                        <a href="/leagues/conf/AFFC/lev/5/reg/Sued/">Süd</a>
                    </div>
                    <div class="item regional-menu-node menu-node-league-5AFFC-West AFFC">
                        <a href="/leagues/conf/AFFC/lev/5/reg/West/">West</a>
                    </div>
                </div>
                <div class="menu-row stats-menu-row hidden_one hidden_two hidden_three">
                    <div class="item stats-menu-node">
                        <a href="/leagues/stats/facts_and_figures/">Facts & Figures</a>
                    </div>
                    <div class="item stats-menu-node">
                        <a href="/leagues/stats/cl_quali/">Champions League Quali Ranking</a>
                    </div>
                    <div class="item stats-menu-node">
                        <a href="/leagues/stats/players/">Players</a>
                    </div>
                    <div class="item stats-menu-node">
                        <a href="/leagues/stats/waiver/">Waiver</a>
                    </div>
                    <div class="item stats-menu-node">
                        <a href="/leagues/stats/draft/">Draft</a>
                    </div>
                </div>
            </nav>
            <div class="breadcrumb-container">
                {% show_breadcrumb 1 "breadcrumb.html" %}
                {% cookielaw_banner  %}
            </div>
            <div class="content">
            <!--
                <div class="countdown-container">
                    <h1 id="countdown">Nicht mehr lange...</h1>
                    <h1>bis zur Anmeldung für die Saison {% get_current_season %}. Stay Tuned!</h1>
                </div>
                -->
                <div class="announcements">
                    {% get_announcements as announcements %}
                    {% for announcement in announcements %}
                    <div class="ui large icon message">
                        <i class="bullhorn icon"></i>
                        {{ announcement.content|safe }}
                    </div>
                    {% endfor %}

                </div>
                {% block content %}
                {% endblock %}
            </div>
            <footer id="footer">
                <ul>
                    <li class="right"><a href="/impressum">Impressum & Datenschutz</a></li>
                    <li class="right"><a href="/regelwerk">Regelwerk</a></li>
                    <li class="right"><a href="/faq">FAQs</a></li>
                    <li class="right"><a href="http://downsettalk.de/">DOWN,SET,TALK!</a></li>
                    <li class="right"><a href="https://anchor.fm/dstfanfoobl"><i class="inverted large podcast icon"></i></a></li>
                    <li class="right"><a href="https://www.instagram.com/dstfanfoobl/"><i class="inverted large instagram icon"></i></a></li>
                    <li class="right"><a href="https://twitter.com/dstfanfoobl"><i class="inverted large twitter icon"></i></a></li>
                </ul>
            </footer>
        </div>
        {% render_block js %}
        {% block js %}
        <script type="text/javascript" src="{% static 'scripts/jquery_3_1_0_min.js' %}"></script>
        <script type="text/javascript" src="{% static 'scripts/semanticui_2_3_0_min.js' %}"></script>
        <script type="text/javascript" src="{% static 'scripts/moment.min.js' %}"></script>
        <script src="{% static 'cookielaw/js/cookielaw.js' %}"></script>
        <script>
            $(function () {
                $('nav').sticky({context: '#footer'});

                $('#CookielawBanner')
                    .modal({
                        closable  : false,
                        onDeny    : function(){
                            return false;
                        },
                        onApprove : function() {
                            Cookielaw.createCookielawCookie();
                            return true;
                        }
                    })
                    .modal('show')
                ;

                $('.ui.accordion').accordion();


                const delay = 200;

                $('.menu-row.cffc, .menu-row.affc').hover(() => {
                    $('.breadcrumb').addClass('hidden_one hidden_two hidden_three');
                }, () => setTimeout(() => {
                    $('.breadcrumb').removeClass('hidden_one hidden_two hidden_three');
                }, delay));

                $('.league-menu-node.droppable.cffc').hover(() => {
                    $('.cffc-menu-row').removeClass('hidden_one');
                    $('.affc-menu-row').addClass('hidden_one');
                    $('.affc-menu-row').addClass('hidden_two');
                    $('.stats-menu-row').addClass('hidden_one');
                    $('.stats-menu-row').addClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.cffc-menu-row').addClass('hidden_one');}, delay);
                });
                $('.league-menu-node.droppable.affc').hover(() => {
                    $('.affc-menu-row').removeClass('hidden_one');
                    $('.cffc-menu-row').addClass('hidden_one');
                    $('.cffc-menu-row').addClass('hidden_two');
                    $('.stats-menu-row').addClass('hidden_one');
                    $('.stats-menu-row').addClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.affc-menu-row').addClass('hidden_one');}, delay);
                });

                $('.cffc-menu-row').hover(() => {
                    $('.cffc-menu-row').removeClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.cffc-menu-row').addClass('hidden_two');}, delay);
                });
                $('.affc-menu-row').hover(() => {
                    $('.affc-menu-row').removeClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.affc-menu-row').addClass('hidden_two');}, delay);
                });

                $('.regional-cffc-menu-row').hover(() => {
                    $('.cffc-menu-row').removeClass('hidden_three');
                }, () => {
                    setTimeout(() => {$('.cffc-menu-row').addClass('hidden_three');}, delay);
                });
                $('.regional-affc-menu-row').hover(() => {
                    $('.affc-menu-row').removeClass('hidden_three');
                }, () => {
                    setTimeout(() => {$('.affc-menu-row').addClass('hidden_three');}, delay);
                });

                $('.menu-node-league-5CFFC').hover(() => {
                    $('.regional-cffc-menu-row').removeClass('hidden_one');
                }, () => {
                    setTimeout(() => {$('.regional-cffc-menu-row').addClass('hidden_one');}, delay);
                });
                $(' .menu-node-league-5AFFC').hover(() => {
                    $('.regional-affc-menu-row').removeClass('hidden_one');
                }, () => {
                    setTimeout(() => {$('.regional-affc-menu-row').addClass('hidden_one');}, delay);
                });

                $('.regional-cffc-menu-row').hover(() => {
                    $('.regional-cffc-menu-row').removeClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.regional-cffc-menu-row').addClass('hidden_two');}, delay);
                });
                $('.regional-affc-menu-row').hover(() => {
                    $('.regional-affc-menu-row').removeClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.regional-affc-menu-row').addClass('hidden_two');}, delay);
                });

                $('.league-menu-node.droppable.stats-node').hover(() => {
                    $('.stats-menu-row').removeClass('hidden_one');
                    $('.affc-menu-row').addClass('hidden_one');
                    $('.affc-menu-row').addClass('hidden_two');
                    $('.cffc-menu-row').addClass('hidden_one');
                    $('.cffc-menu-row').addClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.stats-menu-row').addClass('hidden_one');}, delay);
                });

                $('.stats-menu-row').hover(() => {
                    $('.stats-menu-row').removeClass('hidden_two');
                }, () => {
                    setTimeout(() => {$('.stats-menu-row').addClass('hidden_two');}, delay);
                });
            });
        </script>
        {% if not is_registration_open %}
            <script>
                // Set the date we're counting down to
                const countDownDate = moment("{% get_registration_starts %}", 'YYYY-MM-DD', 'de').toDate().getTime();
                const countdownEl = document.getElementById("countdown");

                function updateCountdown() {

                    // Get today's date and time
                    let now = new Date().getTime();

                    // Find the distance between now and the count down date
                    let distance = countDownDate - now;

                    // Time calculations for days, hours, minutes and seconds
                    let days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    let seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    // Display the result in the element with id="demo"
                    countdownEl.innerHTML = days + "d " + hours + "h "
                        + minutes + "m " + seconds + "s ";

                    // If the count down is finished, write some text
                    if (distance < 0) {
                        clearInterval(x);
                        countdownEl.innerHTML = "";
                    }
                }
                // Update the count down every 1 second
                let x = setInterval(updateCountdown, 1000);
                updateCountdown();
            </script>
        {% endif %}
        {% endblock %}
    </body>
</html>
